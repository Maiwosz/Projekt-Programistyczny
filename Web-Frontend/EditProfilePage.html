<!DOCTYPE html>
<html>
<head>
    <title>Edycja profilu</title>
    <link rel="stylesheet" href="/styles/styles.css">
    <link rel="stylesheet" href="/styles/googleDrive.css">
    <script src="/scripts/edit.js"></script>
    <script src="/scripts/auth.js"></script>
    <!-- Rozdzielone skrypty Google Drive -->
    <script src="/scripts/googleDriveLogic.js"></script>
    <script src="/scripts/googleDriveUI.js"></script>
</head> 
<body class="editBody">
    <div id="editPanel" class="changePanel">
        <form class="formEdit" id="formEditId">
            <label id="inputLabel" for="mainInput">Nowa warto≈õƒá:</label>
            <input type="text" id="mainInput" required><br>

            <label for="password" id="passwordInput">Has≈Ço:</label>
            <input type="password" id="password" required><br>
            <div class="editContainerData">
            <button type="submit" class="buttonZmien" id="saveButton">Zapisz</button>
            <button type="button" class="buttonZmien" onclick="closePanel()">Anuluj</button>
            </div>
        </form>
    </div>
    <div class="logged-in" style="display: none;">
        <div class="editContainerButtons">
            <button class="buttonEditPage" onclick="open_mainpage()">Strona G≈Ç√≥wna</button>
            <button class="buttonEditPage" onclick="logout()">Wyloguj</button>
        </div>

        <div class="editContainerPackImage">
            <h1 class="h1Edit">Zdjƒôcie Profilowe</h1>
            <img class="imgBorder" id="picture" alt="boo">
            <div class="editContainerButtons">
                <button class="buttonEditPage" onclick="triggerFileInput()">Dodaj nowe</button>
                <button class="buttonEditPage">Potwierd≈∫</button>
            </div>
        </div>

        <div class="editContainerRow">
            <div class="editContainerPackDate">
                <div class="editContainerData">
                    <div class="divEdit">Email:</div>
                    <span class="spanEdit" id="email"></span>
                    <button class="buttonZmien" onclick="showPanel('email')">Zmie≈Ñ</button>                  
                </div>
                <div class="editContainerData">
                    <div class="divEdit">Login:</div>
                    <span class="spanEdit" id="login"></span>
                    <button class="buttonZmien" onclick="showPanel('login')">Zmie≈Ñ</button> 
                </div>
                
                <!-- Sekcja Google Drive -->
                <div class="editContainerData gdrive-section">
                    <div class="divEditGoogle">Google Drive:</div>
                    <div class="gdrive-status-container">
                        <span class="spanEdit gdrive-status-text" id="gdriveStatus">Sprawdzanie...</span>
                        <span class="gdrive-status-indicator" id="gdriveIndicator">‚óØ</span>
                    </div>
                    <button class="buttonZmien" onclick="showGoogleDriveModal()" id="gdriveButton">Konfiguruj</button>
                </div>
                
                <div class="editContainerButtons2">
                    <button class="buttonEditPage" onclick="showPanel('haslo')">Zmie≈Ñ has≈Ço</button>
                    <button class="buttonEditPage" onclick="removeUser()">Usu≈Ñ konto</button>
                </div>
            </div> 
        </div>
    </div>
    
    <div class="logged-out">
        <p>Zaloguj siƒô aby uzyskaƒá dostƒôp</p>
        <a href="/login.html">Zaloguj</a>
    </div>

    <!-- Modal Google Drive -->
    <div id="googleDriveModal" class="modal gdrive-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Konfiguracja Google Drive</h3>
                <button onclick="closeGoogleDriveModal()" class="close-button" aria-label="Zamknij">&times;</button>
            </div>
            
            <!-- Sekcja gdy nie po≈ÇƒÖczono -->
            <div id="gdrive-disconnected" class="gdrive-section" style="display: none;">
                <div class="gdrive-info">
                    <div class="info-icon">
                        <span class="gdrive-logo">üìÅ</span>
                    </div>
                    <h4>Po≈ÇƒÖcz z Google Drive</h4>
                    <p>Synchronizuj swoje pliki automatycznie z Google Drive dla lepszej dostƒôpno≈õci i bezpiecze≈Ñstwa.</p>
                    
                    <div class="gdrive-benefits">
                        <h5>Korzy≈õci z po≈ÇƒÖczenia:</h5>
                        <ul>
                            <li>üîÑ Automatyczna synchronizacja plik√≥w</li>
                            <li>‚òÅÔ∏è Bezpieczny backup w chmurze</li>
                            <li>üì± Dostƒôp z dowolnego urzƒÖdzenia</li>
                            <li>üîê Szyfrowanie i bezpiecze≈Ñstwo</li>
                        </ul>
                    </div>
                </div>
                
                <div class="gdrive-actions">
                    <button onclick="connectGoogleDrive()" class="buttonEditPage btn-primary btn-large">
                        <span class="btn-icon">üîó</span>
                        Po≈ÇƒÖcz z Google Drive
                    </button>
                </div>
            </div>
            
            <!-- Sekcja gdy po≈ÇƒÖczono -->
            <div id="gdrive-connected" class="gdrive-section" style="display: none;">
                <div class="gdrive-status">
                    <div class="connection-info">
                        <h4>
                            <span class="section-icon">‚ÑπÔ∏è</span>
                            Informacje o po≈ÇƒÖczeniu
                        </h4>
                        <div class="info-grid">
                            <div class="info-row">
                                <strong>Konto Google:</strong> 
                                <span id="gdrive-email" class="info-value">-</span>
                            </div>
                            <div class="info-row">
                                <strong>Nazwa po≈ÇƒÖczenia:</strong> 
                                <span id="gdrive-name" class="info-value">-</span>
                            </div>
                            <div class="info-row">
                                <strong>Ostatnia synchronizacja:</strong> 
                                <span id="gdrive-last-sync" class="info-value">-</span>
                            </div>
                            <div class="info-row">
                                <strong>Status po≈ÇƒÖczenia:</strong> 
                                <span id="gdrive-status" class="status-indicator">-</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="sync-settings">
                    <h4>
                        <span class="section-icon">‚öôÔ∏è</span>
                        Ustawienia synchronizacji
                    </h4>
                    
                    <div class="settings-grid">
                        <div class="setting-row">
                            <label class="setting-label toggle-label">
                                <input type="checkbox" id="auto-sync-enabled" class="toggle-input"> 
                                <span class="toggle-slider"></span>
                                <span class="setting-text">Automatyczna synchronizacja</span>
                            </label>
                        </div>
                        
                        <div class="setting-row">
                            <label class="setting-label" for="sync-interval">
                                Interwa≈Ç synchronizacji (minuty):
                            </label>
                            <input type="number" id="sync-interval" min="1" max="1440" value="5" class="setting-input">
                        </div>
                        
                        <div class="setting-row">
                            <label class="setting-label" for="sync-direction">
                                Kierunek synchronizacji:
                            </label>
                            <select id="sync-direction" class="setting-select">
                                <option value="bidirectional">üîÑ Dwukierunkowa</option>
                                <option value="upload-only">‚¨ÜÔ∏è Tylko wysy≈Çanie</option>
                                <option value="download-only">‚¨áÔ∏è Tylko pobieranie</option>
                            </select>
                        </div>
                        
                        <div class="setting-row">
                            <label class="setting-label" for="max-file-size">
                                Maksymalny rozmiar pliku (MB):
                            </label>
                            <input type="number" id="max-file-size" min="1" max="1000" value="100" class="setting-input">
                        </div>
                    </div>
                </div>
                
                <div class="gdrive-actions">
                    <div class="action-group primary-actions">
                        <button onclick="saveGoogleDriveSettings()" class="buttonEditPage btn-primary">
                            <span class="btn-icon">üíæ</span>
                            Zapisz ustawienia
                        </button>
                        <button onclick="triggerManualSync()" class="buttonEditPage btn-secondary">
                            <span class="btn-icon">üîÑ</span>
                            Synchronizuj teraz
                        </button>
                    </div>
                    
                    <div class="action-group danger-actions">
                        <button onclick="disconnectGoogleDrive()" class="buttonEditPage btn-danger">
                            <span class="btn-icon">üîå</span>
                            Od≈ÇƒÖcz Google Drive
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Loading state -->
            <div id="gdrive-loading" class="gdrive-section loading-section" style="display: none;">
                <div class="loading-container">
                    <div class="loading-spinner"></div>
                    <h4>Trwa przetwarzanie...</h4>
                    <p>Proszƒô czekaƒá, trwa komunikacja z Google Drive.</p>
                </div>
            </div>
            
            <div class="modal-footer">
                <button onclick="closeGoogleDriveModal()" class="buttonEditPage btn-secondary">
                    Zamknij
                </button>
            </div>
        </div>
    </div>
</body>                                             
</html>